assert_lefthook_installed: true
colors: true

output:
  - success
  - failure
  - execution
  - execution_out

commit-msg:
  parallel: false
  commands:
    conform:
      skip:
        - merge
        - rebase
      run: go tool conform enforce --commit-msg-file {1}

pre-commit:
  parallel: true
  commands:
    install:
      run: go tool lefthook install
      glob: "lefthook.yml"
    tidy:
      run: go mod tidy
      stage_fixed: true
    format:
      run: go fmt ./...
      stage_fixed: true

post-checkout:
  parallel: false
  commands:
    install-hooks:
      files: if [ "{3}" = "1" ]; then git diff --name-only {1} {2}; fi
      glob: "lefthook.yml"
      run: go tool lefthook install
